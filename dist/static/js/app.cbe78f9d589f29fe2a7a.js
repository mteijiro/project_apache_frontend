webpackJsonp([1],{0:function(t,e){},"05RE":function(t,e){},"4+hh":function(t,e){},Ii5r:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"page-container"},[e("md-app",{attrs:{"md-waterfall":"","md-mode":"fixed-last"}},[e("md-app-toolbar",{staticClass:"md-large md-dense md-primary"},[e("div",{staticClass:"md-toolbar-row"},[e("div",{staticClass:"md-toolbar-section-start"},[e("span",{staticClass:"md-title"},[this._v("Noise Complaint App")])])]),this._v(" "),e("div",{staticClass:"md-toolbar-row"},[e("md-tabs",{staticClass:"md-primary"},[e("md-tab",{attrs:{id:"tab-menu","md-label":"Menu",to:"/"}}),this._v(" "),e("md-tab",{attrs:{id:"tab-submit","md-label":"Submit A Complaint",to:"SubmitAComplaint"}}),this._v(" "),e("md-tab",{attrs:{id:"tab-about","md-label":"About",to:"About"}})],1)],1)]),this._v(" "),e("md-app-content",[e("br"),this._v(" "),e("router-view")],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")({name:"App",data:function(){return{menuVisible:!1}}},n,!1,function(t){a("qyRr"),a("NVTA")},"data-v-26eb112f",null).exports,r=a("/ocq"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h2",[this._v("Main Menu")]),this._v(" "),e("router-link",{attrs:{to:"SubmitAComplaint"}},[this._v("Submit A Complaint")]),this._v(" "),e("br"),this._v(" "),e("router-link",{attrs:{to:"About"}},[this._v("About")])],1)},staticRenderFns:[]};var d=a("VU/8")({name:"main-menu"},s,!1,function(t){a("uRpo")},"data-v-75efdb19",null).exports,l=a("mvHQ"),m=a.n(l),u=a("Xxa5"),c=a.n(u),p=a("exGp"),v=a.n(p),f=a("nrd6"),h=a.n(f),_={name:"leaflet-map",props:{newCoords:{latitude:{type:Number,default:0},longitude:{type:Number,default:0}}},data:function(){return{mymap:{},myMarker:{},curCoords:{latCoord:{type:Number,default:0},longCoord:{type:Number,default:0}}}},mounted:function(){var t=h.a.map("mapid",{minZoom:13,maxZoom:18,maxBounds:[[55.71,12.5],[55.65,12.66]]}).setView([55.679479,12.56947],13);h.a.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',id:"mapbox.streets"}).addTo(t),this.myMarker=h.a.marker([55.679479,12.56947],{draggable:!0}).addTo(t).bindPopup("<b>Location</b><br />Drag me to your location.").openPopup();var e=this;this.myMarker.on("dragend",function(t){e.curCoords.latCoord=this.getLatLng().lat,e.curCoords.longCoord=this.getLatLng().lng,e.$emit("coordsChanged",e.curCoords)}),this.mymap=t},methods:{updateCoords:function(){this.curCoords.latCoord=this.newCoords.latitude,this.curCoords.longCoord=this.newCoords.longitude,this.mymap.setView([this.curCoords.latCoord,this.curCoords.longCoord],this.mymap.getZoom()),this.myMarker.setLatLng([this.curCoords.latCoord,this.curCoords.longCoord]).update()}},watch:{newCoords:{handler:function(t,e){this.updateCoords()}}}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",this._b({attrs:{id:"mapid"}},"div",this.mymap,!1))])},staticRenderFns:[]};var C=a("VU/8")(_,b,!1,function(t){a("05RE")},"data-v-051c82ff",null).exports,g=a("E+XS"),y={name:"SubmitAComplaint",props:{},components:{"leaflet-map":C},data:function(){return{newComplaint:{username:"invalid",password:"noPassword",category:"Street Noise",severity:"1",latitude:0,longitude:0,comments:"",imageUP:null,audioUP:null},lookupAddress:"",provider:null,formIndex:0,endFormIndex:4,myCredentials:{},imageUpload:null,audioUpload:null,categories:[{key:1,value:"Street Noise"},{key:2,value:"Automobile"},{key:3,value:"Business Noise"}],severityRatings:[{key:1,value:"1"},{key:2,value:"2"},{key:3,value:"3"},{key:4,value:"4"},{key:5,value:"5"},{key:6,value:"6"},{key:7,value:"7"},{key:8,value:"8"},{key:9,value:"9"},{key:10,value:"10"}]}},methods:{searchAddress:function(){var t=this;return v()(c.a.mark(function e(){var a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.getElementById("addressBox").value,e.next=3,t.provider.search({query:a});case 3:o=e.sent,t.newComplaint.longitude=o[0].x,t.newComplaint.latitude=o[0].y;case 6:case"end":return e.stop()}},e,t)}))()},getUserLocation:function(t){var e,a=this;e=function(t){null!=t&&(a.newComplaint.latitude=t.coords.latitude,a.newComplaint.longitude=t.coords.longitude)},navigator.geolocation?navigator.geolocation.getCurrentPosition(e):e(null)},backButtonPressed:function(){this.formIndex>0&&(this.formIndex=this.formIndex-1)},nextButtonPressed:function(){this.formIndex<this.endFormIndex-1&&(this.formIndex=this.formIndex+1)},onDragMapCoords:function(t){this.newComplaint.latitude=t.latCoord,this.newComplaint.longitude=t.longCoord},onImageSelected:function(t){this.imageUpload=t.target.files[0],this.newComplaint.imageUP=this.imageUpload},onAudioSelected:function(t){this.audioUpload=t.target.files[0],this.newComplaint.audioUP=this.audioUpload},submitComplaint:function(t,e){this.formIndex===this.endFormIndex-1&&(this.sendToDatabase(t,e),this.formIndex=this.formIndex+1)},compileCredentials:function(t){var e=new FormData;return e.append("username",t.username),e.append("password",t.password),e},compileComplaint:function(t){var e=new FormData;return e.append("severity",t.severity),e.append("category",t.category),e.append("latitude",String(t.latitude)),e.append("longitude",String(t.longitude)),e.append("comments",t.comments),null!=t.imageUP&&e.append("image",t.imageUP,t.imageUP.name),null!=t.audioUP&&e.append("audio",t.audioUP,t.audioUP.name),e},sendToDatabase:function(t,e){var a=this.compileCredentials(t),o=this.compileComplaint(e);fetch("http://18.197.8.126:8000/get-token/",{mode:"cors",body:a,method:"POST"}).then(function(t){return t.json()}).then(function(t){return m()(t.token)}).then(function(t){return"Token "+JSON.parse(t)}).then(function(t){fetch("http://18.197.8.126:8000/complaints/",{mode:"cors",headers:{Authorization:t},body:o,method:"POST"}).then(function(t){alert("Your complaint has been submitted!"),alert("Complaint Data: "+m()(t))})})}},created:function(){},mounted:function(){this.provider=new g.OpenStreetMapProvider}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"greetings"},[a("h2",[t._v("Submit A Complaint")]),t._v(" "),a("form",[0===t.formIndex?[a("md-field",[a("label",[t._v("Username:")]),t._v(" "),a("md-input",{model:{value:t.myCredentials.username,callback:function(e){t.$set(t.myCredentials,"username",e)},expression:"myCredentials.username"}})],1),t._v(" "),a("md-field",[a("label",[t._v("Password:")]),t._v(" "),a("md-input",{attrs:{type:"password"},model:{value:t.myCredentials.password,callback:function(e){t.$set(t.myCredentials,"password",e)},expression:"myCredentials.password"}})],1)]:t._e(),t._v(" "),1===t.formIndex?[a("md-field",[a("label",{attrs:{for:"severity"}},[t._v("Severity")]),t._v(" "),a("md-select",{attrs:{name:"severity",id:"severity"},model:{value:t.severity,callback:function(e){t.severity=e},expression:"severity"}},[a("md-option",{attrs:{disabled:"",value:""}},[t._v("Select Severity")]),t._v(" "),a("md-option",{attrs:{value:"1"}},[t._v("1")]),t._v(" "),a("md-option",{attrs:{value:"2"}},[t._v("2")]),t._v(" "),a("md-option",{attrs:{value:"3"}},[t._v("3")]),t._v(" "),a("md-option",{attrs:{value:"4"}},[t._v("4")]),t._v(" "),a("md-option",{attrs:{value:"5"}},[t._v("5")])],1)],1),t._v(" "),a("md-field",[a("label",{attrs:{for:"category"}},[t._v("Category")]),t._v(" "),a("md-select",{attrs:{name:"category",id:"category"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},[a("md-option",{attrs:{disabled:"",value:""}},[t._v("Select Category")]),t._v(" "),a("md-option",{attrs:{value:"Business Venue"}},[t._v("Business Venue")]),t._v(" "),a("md-option",{attrs:{value:"Construction"}},[t._v("Construction")]),t._v(" "),a("md-option",{attrs:{value:"Traffic"}},[t._v("Traffic")]),t._v(" "),a("md-option",{attrs:{value:"Street Noise"}},[t._v("Street Noise")]),t._v(" "),a("md-option",{attrs:{value:"Private Party"}},[t._v("Private Party")]),t._v(" "),a("md-option",{attrs:{value:"Other"}},[t._v("Other")])],1)],1)]:t._e(),t._v(" "),2===t.formIndex?[a("span",[t._v("Location")]),t._v(" "),a("br"),t._v(" "),a("md-field",[a("label",[t._v("Latitude:")]),t._v(" "),a("md-input",{model:{value:t.newComplaint.latitude,callback:function(e){t.$set(t.newComplaint,"latitude",e)},expression:"newComplaint.latitude"}})],1),t._v(" "),a("md-field",[a("label",[t._v("Longitude:")]),t._v(" "),a("md-input",{model:{value:t.newComplaint.longitude,callback:function(e){t.$set(t.newComplaint,"longitude",e)},expression:"newComplaint.longitude"}})],1),t._v(" "),a("md-button",{staticClass:"md-raised",on:{click:function(e){t.getUserLocation(this)}}},[t._v("Auto Detect My Location")]),t._v(" "),a("md-field",[a("label",[t._v("Search by Address:")]),t._v(" "),a("md-input",{attrs:{id:"addressBox"}})],1),t._v(" "),a("md-button",{staticClass:"md-raised",on:{click:function(e){t.searchAddress(t.lookupAddress)}}},[t._v("Search")]),t._v(" "),a("p",{attrs:{id:"locationDisplay"}},[t._v("Please drag the arrow to your location.")]),t._v(" "),a("leaflet-map",{attrs:{id:"myMap",newCoords:{latitude:t.newComplaint.latitude,longitude:t.newComplaint.longitude}},on:{coordsChanged:t.onDragMapCoords}})]:t._e(),t._v(" "),3===t.formIndex?[a("md-field",[a("label",[t._v("Comments:")]),t._v(" "),a("md-textarea",{model:{value:t.newComplaint.comments,callback:function(e){t.$set(t.newComplaint,"comments",e)},expression:"newComplaint.comments"}})],1),t._v(" "),a("md-field",[a("label",[t._v("Image")]),t._v(" "),a("md-file",{attrs:{accept:"image/*",placeholder:"Upload image file..."},on:{change:t.onImageSelected}})],1),t._v(" "),a("md-field",[a("label",[t._v("Audio")]),t._v(" "),a("md-file",{attrs:{accept:"audio/*",placeholder:"Upload audio file..."},on:{change:t.onAudioSelected}})],1)]:t._e(),t._v(" "),t.formIndex===t.endFormIndex?[a("h3",[t._v("Thank you")]),t._v(" "),a("p",[t._v("Your complaint has been submitted")])]:t._e(),t._v(" "),a("br"),t._v(" "),a("div",[t.formIndex>0&&t.formIndex<t.endFormIndex?[a("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.backButtonPressed()}}},[t._v("Back")])]:t._e(),t._v(" "),t.formIndex<t.endFormIndex-1?[a("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.nextButtonPressed()}}},[t._v("Next")])]:t._e(),t._v(" "),t.formIndex===t.endFormIndex-1?[a("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.submitComplaint(t.myCredentials,t.newComplaint)}}},[t._v("Submit")])]:t._e()],2)],2)])},staticRenderFns:[]};var w=a("VU/8")(y,x,!1,function(t){a("dqJJ")},"data-v-6d7c82c8",null).exports,k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("H2",[this._v("About")]),this._v(" "),e("p",[this._v("Information about the app goes here")])],1)},staticRenderFns:[]};var I=a("VU/8")({name:"about"},k,!1,function(t){a("zQcb")},"data-v-29b1a03e",null).exports;o.default.use(r.a);var A=new r.a({routes:[{path:"/",name:"MainMenu",component:d},{path:"/SubmitAComplaint",name:"SubmitAComplaint",component:w},{path:"/About",name:"About",component:I}]}),S=a("8+8L"),P=a("Lgyv"),U=a.n(P);a("4+hh"),a("Ii5r");o.default.use(U.a),o.default.use(S.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:A,components:{App:i},template:"<App/>"})},NVTA:function(t,e){},dqJJ:function(t,e){},qyRr:function(t,e){},uRpo:function(t,e){},zQcb:function(t,e){}},["NHnr"]);